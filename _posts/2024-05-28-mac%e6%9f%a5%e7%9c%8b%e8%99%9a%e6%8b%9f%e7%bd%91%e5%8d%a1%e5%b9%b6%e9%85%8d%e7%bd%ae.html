---
layout: post
title: Mac查看虚拟网卡并配置
date: 2024-05-28 15:49:08.000000000 +08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Mac
tags: []
meta:
  _edit_last: '1'
  _wpcom_is_markdown: '1'
author:
  login: gavin
  email: 519077334@qq.com
  display_name: gavin
  first_name: ''
  last_name: ''
permalink: "/index.php/2024/05/28/mac%e6%9f%a5%e7%9c%8b%e8%99%9a%e6%8b%9f%e7%bd%91%e5%8d%a1%e5%b9%b6%e9%85%8d%e7%bd%ae/"
---
<p>在macOS上，虚拟网卡通常用于VPN、Docker等虚拟化或隧道网络连接。虚拟网卡通常以<code>utun</code>、<code>vnic</code>或<code>bridge</code>等命名。如果你想查看有哪些虚拟网卡以及它们的配置，可以使用命令行工具如<code>ifconfig</code>和<code>networksetup</code>。</p>
<h3>查看虚拟网卡</h3>
<ol>
<li><strong>使用 <code>ifconfig</code> 命令</strong>：</li>
</ol>
<p>这个命令列出了所有网络接口，包括虚拟网卡。</p>
<pre><code class="language-sh line-numbers">ifconfig
</code></pre>
<p>输出示例：</p>
<pre><code class="language-sh line-numbers">utun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1380
inet6 fe80::aede:48ff:fe00:1122%utun0 prefixlen 64 scopeid 0xa
inet 10.0.0.1 --&gt; 10.0.0.1 netmask 0xffffffff
utun1: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1380
inet6 fe80::aede:48ff:fe00:1123%utun1 prefixlen 64 scopeid 0xb
inet 10.0.0.2 --&gt; 10.0.0.2 netmask 0xffffffff
</code></pre>
<p>在这个示例中，<code>utun0</code>和<code>utun1</code>是两个虚拟网卡。</p>
<ol start="2">
<li><strong>使用 <code>networksetup</code> 命令</strong>：</li>
</ol>
<p>列出所有网络服务，包括虚拟网卡：</p>
<pre><code class="language-sh line-numbers">networksetup -listallnetworkservices
</code></pre>
<p>输出示例：</p>
<pre><code class="language-sh line-numbers">An asterisk (*) denotes that a network service is disabled.
Wi-Fi
Bluetooth PAN
Thunderbolt Bridge
USB 10/100/1000 LAN
Thunderbolt 1
VPN (L2TP)
</code></pre>
<p>虚拟网卡（如VPN连接）可能会显示在此列表中。</p>
<h3>查看虚拟网卡配置</h3>
<p>要查看特定虚拟网卡的详细信息，可以使用以下命令：</p>
<ol>
<li><strong>查看网卡详细信息</strong>：</li>
</ol>
<p>使用<code>ifconfig</code>命令查看特定网卡的信息：</p>
<pre><code class="language-sh line-numbers">ifconfig utun0
</code></pre>
<ol start="2">
<li><strong>查看DNS配置</strong>：</li>
</ol>
<p>使用<code>scutil</code>命令查看特定网络服务的DNS配置：</p>
<pre><code class="language-sh line-numbers">scutil --dns
</code></pre>
<p>或者查看特定服务的DNS配置：</p>
<pre><code class="language-sh line-numbers">scutil --get State:/Network/Service/utun0/DNS
</code></pre>
<h3>修改虚拟网卡配置</h3>
<p>可以使用<code>scutil</code>或<code>networksetup</code>命令来修改虚拟网卡的配置。</p>
<ol>
<li><strong>使用 <code>scutil</code> 命令</strong>：</li>
</ol>
<p>进入<code>scutil</code>交互模式，然后修改配置。以下是一个示例，如何为<code>utun0</code>配置DNS。</p>
<pre><code class="language-sh line-numbers">sudo scutil
</code></pre>
<p>进入<code>scutil</code>后：</p>
<pre><code class="language-sh line-numbers">&gt; open
&gt; d.init
&gt; d.add ServerAddresses * 8.8.8.8 8.8.4.4
&gt; d.add SupplementalMatchDomains * mllocal.com.my
&gt; set State:/Network/Service/utun0/DNS
&gt; quit
</code></pre>
<ol start="2">
<li><strong>使用 <code>networksetup</code> 命令</strong>：</li>
</ol>
<p><code>networksetup</code>可以用于更改网络服务的设置，例如设置DNS服务器。</p>
<p>列出所有网络服务（包括虚拟网卡）：</p>
<pre><code class="language-sh line-numbers">networksetup -listallnetworkservices
</code></pre>
<p>设置特定网络服务的DNS服务器，例如VPN：</p>
<pre><code class="language-sh line-numbers">sudo networksetup -setdnsservers "VPN (L2TP)" 8.8.8.8 8.8.4.4
</code></pre>
<h3>示例操作</h3>
<h4>查看和修改<code>utun0</code>的DNS配置</h4>
<ol>
<li><strong>查看<code>utun0</code>信息</strong>：</li>
</ol>
<pre><code class="language-sh line-numbers">ifconfig utun0
</code></pre>
<ol start="2">
<li><strong>查看<code>utun0</code>的DNS配置</strong>：</li>
</ol>
<pre><code class="language-sh line-numbers">scutil --get State:/Network/Service/utun0/DNS
</code></pre>
<ol start="3">
<li><strong>修改<code>utun0</code>的DNS配置</strong>：</li>
</ol>
<p>进入<code>scutil</code>交互模式：</p>
<pre><code class="language-sh line-numbers">sudo scutil
</code></pre>
<p>在<code>scutil</code>交互模式中：</p>
<pre><code class="language-sh line-numbers">&gt; open
&gt; d.init
&gt; d.add ServerAddresses * 8.8.8.8 8.8.4.4
&gt; d.add SupplementalMatchDomains * mllocal.com.my
&gt; set State:/Network/Service/utun0/DNS
&gt; quit
</code></pre>
<h3>总结</h3>
<p>使用<code>ifconfig</code>和<code>networksetup</code>命令可以查看macOS系统中的虚拟网卡。通过<code>scutil</code>命令可以修改特定虚拟网卡的DNS配置。确保使用正确的网卡名称和配置路径，以正确应用你的设置。</p>
